<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Forgot Password - ReadNest</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap");

      * {
        font-family: "Poppins", sans-serif;
      }
      body {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
      }
      .form-container {
        animation: slideIn 0.5s ease-out;
      }
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .input-field {
        transition: all 0.3s ease;
      }
      .input-field:focus {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }
      .submit-btn {
        transition: all 0.3s ease;
      }
      .submit-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 16px rgba(79, 70, 229, 0.4);
      }
      .back-btn {
        transition: all 0.3s ease;
      }
      .back-btn:hover {
        transform: translateX(-3px);
      }
      .error-message {
        display: none;
        animation: shake 0.3s ease;
      }
      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-5px);
        }
        75% {
          transform: translateX(5px);
        }
      }
      .success-message {
        display: none;
        animation: fadeIn 0.3s ease;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
      .icon-container {
        animation: pulse 2s ease-in-out infinite;
      }
      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }
    </style>
  </head>
  <body class="flex items-center justify-center min-h-screen p-4">
    <div
      class="form-container bg-gray-200 rounded-3xl shadow-2xl max-w-md w-full p-8 md:p-12"
    >
      <!-- Back Button -->
      <div class="mb-6">
        <a
          href="/login"
          class="back-btn inline-flex items-center text-gray-700 font-medium hover:text-indigo-600"
        >
          <i class="fas fa-arrow-left mr-2"></i>
          Back to Login
        </a>
      </div>

      <!-- Icon and Title -->
      <div class="text-center mb-8">
        <div
          class="icon-container inline-flex items-center justify-center w-20 h-20 bg-indigo-100 rounded-full mb-4"
        >
          <i class="fas fa-lock text-4xl text-indigo-600"></i>
        </div>
        <h1 class="text-4xl font-bold text-gray-900 mb-2">Forgot Password?</h1>
        <p class="text-gray-600 font-medium mt-3">
          No worries! Enter your email and we'll send you reset instructions.
        </p>
      </div>

      <!-- Error Message -->
      <div
        id="errorMessage"
        class="error-message mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg"
      >
        <i class="fas fa-exclamation-circle mr-2"></i>
        <span id="errorText"></span>
      </div>

      <!-- Success Message -->
      <div
        id="successMessage"
        class="success-message mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded-lg"
      >
        <i class="fas fa-check-circle mr-2"></i>
        <span id="successText">Reset link sent! Check your email.</span>
      </div>

      <!-- Server Message (EJS) -->
      <% if (typeof message !== 'undefined' && message) { %>
      <div
        class="mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg text-center font-medium"
      >
        <i class="fas fa-exclamation-circle mr-2"></i>
        <span><%= message %></span>
      </div>
      <% } %>

      <!-- Form -->
      <form
        id="forgotPasswordForm"
        class="space-y-4"
        action="/forgot-password"
        method="POST"
      >
        <!-- Email Input -->
        <div>
          <input
            type="email"
            id="email"
            name="email"
            placeholder="Enter Your Email"
            class="input-field w-full px-6 py-4 bg-white rounded-2xl border-none outline-none text-gray-800 placeholder-gray-700 font-medium"
           
          />
          <p
            id="emailError"
            class="error-message text-red-500 text-sm mt-2 ml-2"
          >
            <i class="fas fa-exclamation-circle mr-1"></i>
            <span></span>
          </p>
        </div>

        <!-- Submit Button -->
        <button
          type="submit"
          class="submit-btn w-full bg-indigo-600 text-white font-bold text-xl py-4 rounded-2xl hover:bg-indigo-700 mt-6"
        >
          Send Reset Link
        </button>
      </form>

      <!-- Additional Help -->
      <div class="text-center mt-6">
        <p class="text-gray-700 font-medium">
          Remember your password?
          <a
            href="/login"
            class="text-indigo-600 hover:text-indigo-700 font-semibold hover:underline"
            >Log In</a
          >
        </p>
      </div>

      <!-- Contact Support -->
      <div class="text-center mt-6 pt-6 border-t-2 border-gray-300">
        <p class="text-gray-600 text-sm">
          Need help?
          <a
            href="/contact"
            class="text-indigo-600 hover:text-indigo-700 font-medium hover:underline"
            >Contact Support</a
          >
        </p>
      </div>
    </div>

    <script>
        
      function showError(fieldId, message) {
        const errorElement = document.getElementById(fieldId + "Error");
        errorElement.querySelector("span").textContent = message;
        errorElement.style.display = "block";
        document
          .getElementById(fieldId)
          .classList.add("border-2", "border-red-500");
      }

      function hideError(fieldId) {
        const errorElement = document.getElementById(fieldId + "Error");
        errorElement.style.display = "none";
        document
          .getElementById(fieldId)
          .classList.remove("border-2", "border-red-500");
      }

      function showMainError(message) {
        const errorMessage = document.getElementById("errorMessage");
        document.getElementById("errorText").textContent = message;
        errorMessage.style.display = "block";
        setTimeout(() => {
          errorMessage.style.display = "none";
        }, 5000);
      }

      function showSuccess(message) {
        const successMessage = document.getElementById("successMessage");
        document.getElementById("successText").textContent = message;
        successMessage.style.display = "block";
        setTimeout(() => {
          successMessage.style.display = "none";
        }, 5000);
      }

      function validateEmail(email) {
        const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!email.trim()) {
          showError("email", "Email is required");
          return false;
        }
        if (!emailPattern.test(email.trim())) {
          showError("email", "Enter a valid email address");
          return false;
        }
        hideError("email");
        return true;
      }

      document.getElementById("email").addEventListener("blur", function () {
        validateEmail(this.value);
      });

      document.getElementById("email").addEventListener("input", function () {
        if (this.classList.contains("border-red-500")) {
          hideError("email");
        }
      });

      document
        .getElementById("forgotPasswordForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          const email = document.getElementById("email").value;

          if (!validateEmail(email)) {
            return;
          }

          // Simulate form submission (replace with actual form submit)
          // For demo purposes, showing success message
          showSuccess("Reset link sent to " + email + "!");

          // Uncomment below to actually submit the form
          this.submit();
        });

      document.getElementById("email").addEventListener("keypress", function (e) {
        if (e.key === "Enter") {
          e.preventDefault();
          document
            .getElementById("forgotPasswordForm")
            .dispatchEvent(new Event("submit"));
        }

        setTimeout(() => {
            this.reset();
            window.location.href = "/verify-otp";
        }, 1000);
      });
    </script>
  </body>
</html>